### **Kotlin ã® `inline` ä¿®é£¾å­ã¨ã¯ï¼Ÿ**

Kotlin ã® `inline` ã¯ **é–¢æ•°ã®ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³åŒ–** ã‚’è¡Œã†ä¿®é£¾å­ã§ã€ç‰¹ã« **é«˜éšé–¢æ•°ï¼ˆé–¢æ•°ã‚’å¼•æ•°ã¨ã—ã¦å—ã‘å–ã‚‹é–¢æ•°ï¼‰** ã§ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

**`inline` ã‚’ä½¿ã†ä¸»ãªç›®çš„ï¼š**

1. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š**ï¼ˆé–¢æ•°å‘¼ã³å‡ºã—ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰å‰Šæ¸›ï¼‰
2. **ãƒ©ãƒ ãƒ€å¼ã‚’ä½¿ã†é«˜éšé–¢æ•°ã§ã®æœ€é©åŒ–**
3. **éãƒ­ãƒ¼ã‚«ãƒ«ãƒªã‚¿ãƒ¼ãƒ³ï¼ˆ`return` ã§å¤–å´ã®é–¢æ•°ã‚’æŠœã‘ã‚‹ï¼‰ã‚’å¯èƒ½ã«ã™ã‚‹**

------

## ** 1. `inline` ã®åŸºæœ¬çš„ãªä½¿ã„æ–¹**

`inline` ã‚’ã¤ã‘ã‚‹ã¨ã€é–¢æ•°ã®ã‚³ãƒ¼ãƒ‰ãŒ**ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«**å±•é–‹ã•ã‚Œã€é–¢æ•°å‘¼ã³å‡ºã—ãŒãªããªã‚Šã¾ã™ã€‚

###  ä¾‹ï¼šé€šå¸¸ã®é«˜éšé–¢æ•°

```kotlin
fun normalFunction(block: () -> Unit) {
    println("Before block")
    block()
    println("After block")
}

fun main() {
    normalFunction { println("Inside block") }
}
```

**å®Ÿè¡Œçµæœï¼š**

```
Before block
Inside block
After block
```

 **ã“ã®å ´åˆã€`block()` ã®å‘¼ã³å‡ºã—ã«ã¯é–¢æ•°å‘¼ã³å‡ºã—ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ãŒç™ºç”Ÿã™ã‚‹ã€‚**

------

### ä¾‹ï¼š`inline` ã‚’ä½¿ã†å ´åˆ

```kotlin

inline fun inlineFunction(block: () -> Unit) {
    println("Before block")
    block()
    println("After block")
}

fun main() {
    inlineFunction { println("Inside block") }
}
```

å®Ÿè¡Œçµæœï¼ˆå¤‰ã‚ã‚‰ãªã„ï¼‰

```
Before block
Inside block
After block
```

**`inline` ã®åŠ¹æœ:**

- `inlineFunction` ã®ã‚³ãƒ¼ãƒ‰ãŒ**ãã®ã¾ã¾å±•é–‹**ã•ã‚Œã€é–¢æ•°å‘¼ã³å‡ºã—ãŒãªããªã‚‹ã€‚
- **é–¢æ•°å‘¼ã³å‡ºã—ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ãŒå‰Šæ¸›**ã•ã‚Œã‚‹ã€‚

------

## **2. `inline` ã‚’ä½¿ã†ãƒ¡ãƒªãƒƒãƒˆã¨ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**

**ãƒ¡ãƒªãƒƒãƒˆ**

âœ” **é–¢æ•°å‘¼ã³å‡ºã—ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ãŒãªããªã‚‹** â†’ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š
âœ” **ãƒ©ãƒ ãƒ€å¼ã®ã‚­ãƒ£ãƒ—ãƒãƒ£ã‚’é˜²ã’ã‚‹**ï¼ˆ`crossinline` ã§åˆ¶å¾¡å¯èƒ½ï¼‰
âœ” **éãƒ­ãƒ¼ã‚«ãƒ«ãƒªã‚¿ãƒ¼ãƒ³ãŒå¯èƒ½**ï¼ˆå¾Œè¿°ï¼‰

### âŒ **ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**

âŒ **ã‚³ãƒ¼ãƒ‰ã‚µã‚¤ã‚ºãŒå¢—ãˆã‚‹**ï¼ˆé–¢æ•°ãŒã‚¤ãƒ³ãƒ©ã‚¤ãƒ³å±•é–‹ã•ã‚Œã‚‹ãŸã‚ï¼‰
âŒ **å¤§ããªé–¢æ•°ã‚’ `inline` ã«ã™ã‚‹ã¨é€†ã«ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒæ‚ªåŒ–ã™ã‚‹**

------

## **3. `noinline`ï¼ˆä¸€éƒ¨ã®ãƒ©ãƒ ãƒ€ã‚’ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³åŒ–ã—ãªã„ï¼‰**

`inline` ã§é–¢æ•°ã‚’ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³åŒ–ã™ã‚‹ã¨ã€ã™ã¹ã¦ã®ãƒ©ãƒ ãƒ€å¼•æ•°ã‚‚ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³åŒ–ã•ã‚Œã¾ã™ã€‚
**ãŸã ã—ã€ä¸€éƒ¨ã®ãƒ©ãƒ ãƒ€ã‚’ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³åŒ–ã—ãŸããªã„å ´åˆã¯ `noinline` ã‚’ä½¿ã„ã¾ã™ã€‚**

### **`noinline` ã®ä¾‹**

```kotlin

inline fun testInline(inlined: () -> Unit, noinline notInlined: () -> Unit) {
    inlined()  // ã“ã‚Œã¯ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³åŒ–ã•ã‚Œã‚‹
    notInlined()  // ã“ã‚Œã¯é€šå¸¸ã®é–¢æ•°ã¨ã—ã¦å‘¼ã³å‡ºã•ã‚Œã‚‹
}
```

**`noinline` ã‚’ã¤ã‘ãŸ `notInlined` ã¯é€šå¸¸ã®é–¢æ•°å‘¼ã³å‡ºã—ã®ã¾ã¾ã«ãªã‚‹ã€‚**

------

## ** 4. `crossinline`ï¼ˆãƒ©ãƒ ãƒ€ã® `return` ã‚’ç¦æ­¢ï¼‰**

é€šå¸¸ã€`inline` é–¢æ•°å†…ã®ãƒ©ãƒ ãƒ€ã§ã¯**éãƒ­ãƒ¼ã‚«ãƒ«ãƒªã‚¿ãƒ¼ãƒ³**ãŒå¯èƒ½ã§ã™ã€‚
ã—ã‹ã—ã€**ä»–ã®ã‚¹ã‚³ãƒ¼ãƒ—ã§ãƒ©ãƒ ãƒ€ãŒå‘¼ã°ã‚Œã‚‹å ´åˆã€`crossinline` ã‚’ä½¿ã£ã¦ `return` ã‚’ç¦æ­¢** ã§ãã¾ã™ã€‚

### ** éãƒ­ãƒ¼ã‚«ãƒ«ãƒªã‚¿ãƒ¼ãƒ³ï¼ˆ`return` ã§å¤–å´ã®é–¢æ•°ã‚’çµ‚äº†ï¼‰**

```kotlin

inline fun test(block: () -> Unit) {
    block()  // `block()` å†…ã§ return ã™ã‚‹ã¨ `test()` ã‚‚çµ‚äº†ã™ã‚‹
}

fun main() {
    test {
        println("Before return")
        return  // `main()` ã‚‚çµ‚äº†ã—ã¦ã—ã¾ã†
    }
    println("This will not be printed") // å®Ÿè¡Œã•ã‚Œãªã„
}
```

** `return` ã™ã‚‹ã¨ `main()` ã¾ã§æŠœã‘ã¦ã—ã¾ã†ï¼**

------

### **`crossinline` ã§ `return` ã‚’ç¦æ­¢**

```kotlin

inline fun testCross(crossinline block: () -> Unit) {
    block()  // `crossinline` ã‚’ã¤ã‘ã‚‹ã¨ `return` ã§ããªã„
}

fun main() {
    testCross {
        println("Before return")
        // return  // âŒ ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼
    }
    println("This will be printed")
}
```

**`crossinline` ã‚’ã¤ã‘ã‚‹ã¨ `return` ã§ããªããªã‚‹ã€‚**

------

## ** 5. `reified`ï¼ˆå‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å…·ä½“çš„ãªå‹ã«ã™ã‚‹ï¼‰**

é€šå¸¸ã€ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã®å‹æƒ…å ±ã¯**å®Ÿè¡Œæ™‚ã«ã¯æ¶ˆãˆã‚‹**ï¼ˆå‹æ¶ˆå»ï¼‰ã€‚
ã—ã‹ã—ã€`inline` ã¨ `reified` ã‚’ä½¿ã†ã¨ã€**å‹æƒ…å ±ã‚’ä¿æŒ** ã§ãã‚‹ã€‚

### **ğŸš€ `reified` ã®ä¾‹**

```kotlin

inline fun <reified T> printType() {
    println(T::class.java)  // å®Ÿè¡Œæ™‚ã«å‹ã‚’å–å¾—ã§ãã‚‹
}

fun main() {
    printType<String>()  // -> class java.lang.String
    printType<Int>()  // -> class java.lang.Integer
}
```

**ğŸ‘‰ `reified` ã‚’ä½¿ã†ã¨ã€å‹ `T` ã‚’ `T::class.java` ã§å–å¾—ã§ãã‚‹ã€‚**

------

## ** ã¾ã¨ã‚**

âœ… **`inline` ã‚’ä½¿ã†ã¨é–¢æ•°ãŒã‚¤ãƒ³ãƒ©ã‚¤ãƒ³å±•é–‹ã•ã‚Œã€é–¢æ•°å‘¼ã³å‡ºã—ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ãŒãªããªã‚‹ã€‚**
âœ… **`noinline` ã‚’ä½¿ã†ã¨ã€ä¸€éƒ¨ã®ãƒ©ãƒ ãƒ€ã‚’ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³åŒ–ã—ãªã„ã‚ˆã†ã«ã§ãã‚‹ã€‚**
âœ… **`crossinline` ã‚’ä½¿ã†ã¨ã€ãƒ©ãƒ ãƒ€å†…ã§ `return` ã§ããªããªã‚‹ï¼ˆéãƒ­ãƒ¼ã‚«ãƒ«ãƒªã‚¿ãƒ¼ãƒ³ã®ç¦æ­¢ï¼‰ã€‚**
âœ… **`reified` ã‚’ä½¿ã†ã¨ã€å‹æƒ…å ±ã‚’ä¿æŒã§ãã‚‹ï¼ˆå‹æ¶ˆå»ã‚’é˜²ãï¼‰ã€‚**